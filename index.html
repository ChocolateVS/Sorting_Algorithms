<!DOCTYPE html>
<html>
	<head>
		<link href="https://fonts.googleapis.com/css?family=Arvo&display=swap" rel="stylesheet">
		<link rel='stylesheet' type="text/css" href="assets/css/style.css">
		<title>Sorting Algorithm</title>
	</head>
	
	<body onload="generate_random()">
		<p class="lw">Sorting Algorithms</p>
		<center>
		  <canvas id="blocks" width='1020px' height='700px'></canvas><br>
		  <button class='randomize' Onclick="randomize()";>RANDOMIZE</button>
		  <button class='sort' Onclick="sort_bogo()">BOGO RANDOM</button>
		  <button class='sort' Onclick="bubble_sort()">BUBBLE SORT</button>
		  <button class='sort' Onclick="selection_sort()">SELECTION SORT</button>
		  <br>
		  <p class="data">ATTEMPTS:</p><p id="count" class="data"></p>
		</center>
	</body>
	<script>
	var canvas = document.getElementById("blocks");
	var ctx = canvas.getContext("2d");
	var canvas_w = 1020;
	var canvas_h = 700;
	var block_w = 100;
	var block_h = canvas_h;
	var start_x = 60;
	var start_y = 20;
	var arr =  ['1', '2', '3', '4', '5', '6'];
	var sArr =  ['1', '2', '3', '4', '5', '6'];
	var count = 0;
	
	function generate_random() {
		start_x = 60;
	    ctx.fillStyle = "#36A1D4";
		ctx.fillRect(0,0,canvas_w,canvas_h);
	    ctx.fillStyle = "#D22D16";
			for(let i = 0; i < sArr.length; i++){
			   ctx.fillRect(start_x, start_y+(100*sArr[i]), block_w,  block_h-100);
			   start_x += 160;	
			}
	}
		
	function randomize(){
	  shuffle(sArr);
	  generate_random();
	}
	
	function shuffle(array) {
	  array.sort(() => Math.random() - 0.5);
	  console.log(sArr);
	}
	
	function sorted() {
	    console.log("Sorted!");
		console.log("Attempts: ", count);
		document.getElementById("count").innerHTML = count;
		count = 0;
	}
	
	////////////////////BOGO RANDOM SORT//////////////////
	function sort_bogo(){
		if (arraysMatch(sArr, arr)) {
			sorted();
		}	
		else {
		    randomize();
			count++;
			document.getElementById("count").innerHTML = count;
			console.log(count);
			setTimeout( function(){
				sort_bogo();
			}, 100 );		
		}		
	}
	//////////////////////SELECTION SORT///////////////////////

	//////////////////////BUBBLE SORT//////////////////////////
	var sorted = false;
	function bubble_sort() {
		if (!sorted) {
				if (arraysMatch(arr, sArr)){
					sorted = true;
					console.log("Sorted!");
				}
				for (let i=0; i<sArr.length; i++){
					(function(i) {
						setTimeout(function() {
							if (!sorted){
								e1 = i;
								e2 = i + 1;
								if (greater(sArr[e1], sArr[e2])){
								console.log("for loop");
									temp = sArr[e1];
									sArr[e1] = sArr[e2];
									sArr[e2] = temp;
									generate_random();
									if (arraysMatch(arr, sArr)){
										sorted = true;
									}
									else {
										setTimeout(function() {
											bubble_sort();
										},300*i);
									}
								}
							}
						},300*i);
					})(i);
				}
		}
	}
	
	var greater = function(var1,var2){
		if (var1>var2){ return true;}
		if (var1<var2){ return false;}
	}
	//CHECKS WHETHER ARRAYS MATCH
	var arraysMatch = function (arr1, arr2) {
		if (arr1.length !== arr2.length) return false;
		for (var i = 0; i < arr1.length; i++) {
			if (arr1[i] !== arr2[i]) return false;
		}
		return true;
	};
	</script>
</html>